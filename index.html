<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Mi mascota dice NO</title>

<!-- üîπ Fuentes de Google -->
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">

<style>
body {
  font-family: 'Montserrat', sans-serif;
  text-align: center;
  background-color: #f9f7f2;
  margin: 0;
  padding: 0;
}

h1 {
  margin-top: 20px;
  color: #222;
  font-family: 'Bebas Neue', sans-serif;
  font-size: 2.4em;
}

#logo {
  width: 120px;
  margin: 10px auto;
  display: block;
}

/* Redes sociales debajo del logo */
.social-links {
  margin-bottom: 20px;
}

.social-links a {
  display: inline-block;
  margin: 0 10px;
  transition: transform 0.2s;
}

.social-links a:hover {
  transform: scale(1.1);
}

.social-links svg {
  width: 30px;
  height: 30px;
}

#preview-container {
  background: #fff;
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  display: inline-block;
  margin: 20px auto;
}

canvas {
  border-radius: 16px;
  width: 300px;
  height: 540px;
  background-color: #faf9f6;
}

input, button, select {
  margin: 10px;
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 14px;
}

button {
  cursor: pointer;
  background-color: #d72626;
  color: white;
  font-weight: bold;
  transition: background 0.2s;
}

button:hover {
  background-color: #a81818;
}
</style>
</head>
<body>

<h1>Genera tu afiche:<br>‚ÄúMi mascota dice NO a la Constituyente‚Äù</h1>

<!-- Logotipo superior -->
<img id="logo" src="logo.png" alt="Logo del movimiento" />

<!-- Redes sociales con √≠conos SVG -->
<div class="social-links">
  <a href="TU_ENLACE_FACEBOOK" target="_blank" aria-label="Facebook">
    <svg viewBox="0 0 24 24" fill="#1877F2"><path d="M22.675 0h-21.35C.6 0 0 .6 0 1.325v21.351C0 23.4.6 24 1.325 24h11.49v-9.294H9.692V11.03h3.123V8.413c0-3.1 1.894-4.788 4.662-4.788 1.325 0 2.463.098 2.795.142v3.24l-1.918.001c-1.505 0-1.796.716-1.796 1.765v2.316h3.587l-.467 3.676h-3.12V24h6.116C23.4 24 24 23.4 24 22.675V1.325C24 .6 23.4 0 22.675 0z"/></svg>
  </a>
  <a href="TU_ENLACE_INSTAGRAM" target="_blank" aria-label="Instagram">
    <svg viewBox="0 0 24 24" fill="#E4405F"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 1.366.062 2.633.35 3.608 1.325.975.975 1.263 2.242 1.325 3.608.058 1.266.07 1.646.07 4.85s-.012 3.584-.07 4.85c-.062 1.366-.35 2.633-1.325 3.608-.975.975-2.242 1.263-3.608 1.325-1.266.058-1.646.07-4.85.07s-3.584-.012-4.85-.07c-1.366-.062-2.633-.35-3.608-1.325-.975-.975-1.263-2.242-1.325-3.608C2.175 15.747 2.163 15.367 2.163 12s.012-3.584.07-4.85c.062-1.366.35-2.633 1.325-3.608C4.533 2.583 5.8 2.295 7.166 2.233 8.432 2.175 8.812 2.163 12 2.163zm0-2.163C8.741 0 8.332.014 7.052.072 5.773.13 4.653.388 3.703 1.338c-.95.95-1.208 2.07-1.266 3.349C2.014 5.968 2 6.377 2 9.636v4.728c0 3.259.014 3.668.072 4.948.058 1.279.316 2.399 1.266 3.349.95.95 2.07 1.208 3.349 1.266 1.28.058 1.689.072 4.948.072s3.668-.014 4.948-.072c1.279-.058 2.399-.316 3.349-1.266.95-.95 1.208-2.07 1.266-3.349.058-1.28.072-1.689.072-4.948V9.636c0-3.259-.014-3.668-.072-4.948-.058-1.279-.316-2.399-1.266-3.349-.95-.95-2.07-1.208-3.349-1.266C15.668.014 15.259 0 12 0z"/></svg>
  </a>
</div>

<div>
  <label for="nombre">Nombre de tu mascota:</label>
  <input type="text" id="nombre" placeholder="Ej. Copito" />
  <input type="file" id="foto" accept="image/*" />
</div>

<div>
  <label for="plantilla">Plantilla:</label>
  <select id="plantilla">
    <option value="A">Plantilla A</option>
    <option value="B">Plantilla B</option>
  </select>
</div>

<div id="preview-container">
  <canvas id="afiche" width="600" height="1080"></canvas>
</div>

<div>
  <span>Comparte tu afiche</span><br>
  <button id="shareWhatsapp">WhatsApp</button>
  <button id="shareFacebook">Facebook</button>
  <button id="shareInstagram">Instagram</button>
</div>

<div>
  <button id="downloadBtn">‚¨áÔ∏è Descargar</button>
</div>

<script>
const canvas = document.getElementById('afiche');
const ctx = canvas.getContext('2d');
const nombreInput = document.getElementById('nombre');
const fotoInput = document.getElementById('foto');
const plantillaSelect = document.getElementById('plantilla');
const downloadBtn = document.getElementById('downloadBtn');
const shareWhatsapp = document.getElementById('shareWhatsapp');
const shareFacebook = document.getElementById('shareFacebook');
const shareInstagram = document.getElementById('shareInstagram');
let foto = null;
const logoImagen = new Image();
logoImagen.src = 'logo.png';

const plantillas = {
  A: { fondo:'#fdfaf4', colorTexto:'#222', colorNo:'#d72626', fraseSuperior:'¬°MIS DERECHOS EST√ÅN EN RIESGO!', fraseInferior:'La Constituci√≥n actual protege los derechos de la naturaleza y de los animales (art. 71)', fuenteTitulo:'bold 70px "Bebas Neue"', fuenteTexto:'bold 40px Montserrat' },
  B: { fondo:'#eaf3f8', colorTexto:'#0b2d50', colorNo:'#0074d9', fraseSuperior:'¬°DEFENDAMOS JUNTOS NUESTROS DERECHOS!', fraseInferior:'Tu mascota tambi√©n dice NO a la Constituyente', fuenteTitulo:'bold 70px "Bebas Neue"', fuenteTexto:'bold 40px Montserrat' }
};

// Ajusta texto y tama√±o din√°micamente para frases muy largas
function ajustarTexto(texto, maxWidth, fontBase, maxFontSize, minFontSize){
  let size = maxFontSize;
  let lines;
  do {
    ctx.font = fontBase.replace(/\d+px/, size+'px');
    lines = [];
    let words = texto.split(' '), line='';
    for(let w of words){
      let testLine = line + w + ' ';
      if(ctx.measureText(testLine).width > maxWidth && line!==''){
        lines.push(line.trim());
        line = w + ' ';
      } else line = testLine;
    }
    lines.push(line.trim());
    if(lines.length>5 && size>minFontSize) size -=2;
    else break;
  } while(true);
  return {lines, fontSize:size};
}

function dibujar(){
  const p = plantillas[plantillaSelect.value];
  ctx.fillStyle = p.fondo;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.textAlign='center';

  // Frase superior
  let sup = ajustarTexto(p.fraseSuperior, 500, p.fuenteTexto, 40, 18);
  ctx.font = `bold ${sup.fontSize}px Montserrat`;
  sup.lines.forEach((l,i)=> ctx.fillText(l, canvas.width/2, 100 + i*sup.fontSize));

  // Nombre mascota
  const nombre = nombreInput.value.toUpperCase() || 'TU MASCOTA';
  let nombreAdj = ajustarTexto(`${nombre} DICE`, 500, p.fuenteTitulo, 70, 40);
  ctx.font = `bold ${nombreAdj.fontSize}px "Bebas Neue"`;
  ctx.fillText(`${nombre} DICE`, canvas.width/2, 260);

  // Foto c√≠rculo
  const circleX = canvas.width/2, circleY=520, circleRadius=180;
  ctx.beginPath(); ctx.arc(circleX,circleY,circleRadius,0,Math.PI*2); ctx.closePath();
  ctx.strokeStyle='#333'; ctx.lineWidth=8; ctx.stroke();
  if(foto){
    const scale = Math.max((circleRadius*2)/foto.width, (circleRadius*2)/foto.height);
    const imgW = foto.width*scale, imgH=foto.height*scale;
    ctx.save();
    ctx.beginPath(); ctx.arc(circleX,circleY,circleRadius,0,Math.PI*2); ctx.clip();
    ctx.drawImage(foto, circleX-imgW/2, circleY-imgH/2, imgW, imgH);
    ctx.restore();
  }

  // NO y frases
  ctx.fillStyle=p.colorNo; ctx.font='bold 160px "Bebas Neue"';
  ctx.fillText('NO', canvas.width/2,850);
  ctx.fillStyle=p.colorTexto; ctx.font='bold 36px Montserrat';
  ctx.fillText('A LA CONSTITUYENTE', canvas.width/2,920);
  let inf = ajustarTexto(p.fraseInferior,500,'bold 24px Montserrat',24,12);
  ctx.font = `bold ${inf.fontSize}px Montserrat`;
  inf.lines.forEach((l,i)=> ctx.fillText(l, canvas.width/2,940+i*28));

  // Logo semitransparente
  if(logoImagen.complete){
    const w=120,h=(logoImagen.height/logoImagen.width)*w;
    ctx.save(); ctx.globalAlpha=0.5;
    ctx.drawImage(logoImagen, canvas.width-w-20, canvas.height-h-60, w, h);
    ctx.restore();
  }
}

nombreInput.addEventListener('input',dibujar);
plantillaSelect.addEventListener('change',dibujar);
fotoInput.addEventListener('change',e=>{
  const f = e.target.files[0]; if(!f) return;
  const r = new FileReader();
  r.onload=ev=>{ foto = new Image(); foto.onload=dibujar; foto.src=ev.target.result; };
  r.readAsDataURL(f);
});

downloadBtn.addEventListener('click',()=>{
  const a=document.createElement('a'); a.download='mi_mascota_dice_no.png';
  a.href=canvas.toDataURL('image/png'); a.click();
});

// Compartir
shareWhatsapp.addEventListener('click',(e)=>{
  e.preventDefault();
  const text = encodeURIComponent('¬°Mira el afiche de mi mascota!');
  const url = canvas.toDataURL('image/png');
  window.open(`https://api.whatsapp.com/send?text=${text} ${url}`,'_blank');
});

shareFacebook.addEventListener('click',(e)=>{
  e.preventDefault();
  const url = canvas.toDataURL('image/png');
  window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`,'_blank');
});

shareInstagram.addEventListener('click',(e)=>{
  e.preventDefault();
  alert('Instagram no permite compartir directamente. Descarga tu afiche y s√∫belo desde la app.');
});

dibujar();
</script>

</body>
</html>
